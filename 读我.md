# Pigeon

**这是一个开源的、分布式的即时通讯系统**

## 为什么我们需要这样的软件

即使在互联网这样的虚拟世界，现在电屏幕也已经无处不在了。

美国用棱镜计划监视着我们，而在中国，所有的网络账号都进行了实名制。匿名已成为一种奢侈。

我们需要一种方法来维护我们的网络隐私。

P2P技术是伟大的。基于P2P技术，我们开发出了BT下载、区块链等去中心化的网络应用。极大地提高了互联网在人类社会中的地位。P2P的去中心化理念，让我们摆脱互联网巨头的垄断成为了可能。极大地提高了用户的主动性作用。去中心化使得网络匿名与反封杀成为可能。

在您的服务器上运行该软件，为我们的事业添一份力。

## 客户端请求发送格式如下

#### 总览

使用UDP协议

请求长度总是4096字节

请求以代表请求类型的ASCII字符开始。例如，如果请求注册，就以'1'开头

然后空3个字节，用'\0'填充

接着是具体内容。不用的字节都需要用'\0'填充

服务器处理请求后会将结果返回到请求来的那个IP和端口

例如，如果你想创建一个账户，你应该发送：

以'1'作为第一个字节，然后是3字节的'\0'，然后32字节的你的ID（不满32字节的补'\0'），然后是经过MD5_32运算的你的密码。剩下的字节全部补'\0'

服务器的回复也以相同的数字开头，然后是3个'\0'。然后是char[]。如果成功，就应该是"Success!\0"，否则就指明你的错误。然后剩余位补'\0'

如果服务器无法识别请求类型，就会返回4096个'\0'

如果信息长度不是4096，服务器不会理会该请求

#### 1. 注册

以'1'和3个'\0'开头，接着是32位的用户ID，然后是32位的密码的MD5，然后填'\0'

#### 2.登陆

以'2'和3个'\0'开头，接着是32位的用户ID，然后是32位的密码的MD5，然后填'\0'

#### 3.修改密码

以'3'和3个'\0'开头，接着是32位的用户ID，然后是32位的旧密码的MD5，然后是32位的新密码的MD5，然后填'\0'

#### 4.登出

以'4'和3个'\0'开头，接着是32位的用户ID，然后是32位的密码的MD5，然后填'\0'

登出时，服务器不一定会返回消息。

#### 5.请求查询好友地址 

以'5'和3个'\0'开头，接着是32位的好友的用户ID，然后填'\0'

服务器返回的消息以以'5'和3个'\0'开头。接下来1字节里，'1'代表他在线，'2'代表离线，'3'代表查无此人。然后又是3个'\0'。假如你的好友在线，接下来又会有一个char[]来告诉你他的地址

当然，服务器不保证查询结果一定正确。您也最好不要经常查，要在本地做好缓存，不然服务器可能吃不消啊。

#### 6.注销

不好意思，但我觉得这种服务真的没必要